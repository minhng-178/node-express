<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head')-%>
  <body>
    <main>
      <%- include('../partials/nav')-%>
      <div class="container col-xxl-12 pt-2">
        <div class="row flex-lg-row-reverse align-items-lg-start g-5">
          <div class="col-12">
            <div class="text-center mb-3">
              <h4 class="section-title">Orchid List</h4>
            </div>
            <div class="text-end mb-3">
              <a href="/orchids/formCreate" class="btn btn-primary"
                >Create New Orchid</a
              >
            </div>

            <div class="table-wrapper">
              <table class="table table-hover table-bordered">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Image</th>
                    <th scope="col">Name</th>
                    <th scope="col">Color</th>
                    <th scope="col">Original</th>
                    <th scope="col">Price</th>
                    <th scope="col">Is Natural</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <% orchids.forEach(function(orchid,index){ %>
                  <tr>
                    <td><%= index + 1 %></td>
                    <td>
                      <figure>
                        <img class="table-img" src="<%= orchid.image %>" />
                      </figure>
                    </td>
                    <td><%= orchid.name %></td>
                    <td><%= orchid.color %></td>
                    <td><%= orchid.original %></td>
                    <td><%= orchid.price %></td>
                    <td><%= orchid.isNatural ? 'Yes' : 'No' %></td>
                    <td>
                      <div class="dropdown">
                        <button
                          class="btn btn-secondary dropdown-toggle"
                          type="button"
                          id="dropdownMenuButton"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                        >
                          <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div
                          class="dropdown-menu"
                          aria-labelledby="dropdownMenuButton"
                        >
                          <a
                            class="dropdown-item"
                            href="/orchids/<%= orchid._id %>"
                          >
                            <button class="btn btn-warning btn-sm">
                              <i class="fa-solid fa-pen-to-square"></i> Edit
                            </button>
                          </a>
                          <div class="dropdown-item">
                            <button
                              class="btn btn-danger btn-sm"
                              data-bs-toggle="modal"
                              data-bs-target="#deleteModal<%= orchid._id %>"
                              data-id="<%= orchid._id %>"
                            >
                              <i class="fa-solid fa-trash"></i> Delete
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <form
                    id="deleteForm<%= orchid._id %>"
                    action="/orchids/<%= orchid._id %>?_method=DELETE"
                    method="POST"
                  >
                    <input
                      type="hidden"
                      name="orchidId"
                      value="<%= orchid._id %>"
                    />
                  </form>
                  <% })%>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <%- include('../partials/footer')-%>
      <!-- Toast -->
      <%- include('../partials/toast')-%>
      <!-- Modal -->
      <%- include('../partials/modal')-%>
    </main>
    <%- include('../scripts/deleteScript')-%>
  </body>
</html>
