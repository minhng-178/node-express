<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head')-%>
  <body>
    <main>
      <%- include('../partials/nav')-%>
      <div class="container">
        <div class="py-5 bg-body-tertiary">
          <div class="container">
            <div class="row mb-3">
              <div class="col-md-6"><div class="h4">Our Best Sell</div></div>
              <div class="col-md-6">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search Orchid"
                    id="searchOrchid"
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="searchButton"
                  >
                    <i class="fas fa-search"></i>
                  </button>
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="clearButton"
                  >
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
              <% orchids.forEach(function(orchid) { %>
              <div class="col">
                <div class="card shadow-sm position-relative">
                  <small class="position-absolute top-0 end-0 m-2">
                    <i class="fa-solid fa-heart"></i>
                  </small>
                  <img
                    class="object-fit-cover border rounded"
                    width="100%"
                    height="225"
                    src="<%= orchid.image %>"
                    alt="<%= orchid.name %>"
                  />

                  <div class="card-body">
                    <div
                      class="d-flex justify-content-between align-items-center mb-2"
                    >
                      <p class="card-text m-0 text-truncate">
                        <%= orchid.name %> - <%= orchid.color %>
                      </p>
                      <small>
                        <p class="card-text m-0 text-body-secondary">
                          <%= orchid.price %> USD
                        </p>
                      </small>
                    </div>
                    <div
                      class="d-flex justify-content-between align-items-center"
                    >
                      <div class="btn-group">
                        <a
                          type="button"
                          class="btn btn-sm btn-outline-primary"
                          href="orchids/orchidDetail/<%= orchid.slug %>"
                        >
                          <i class="fa-solid fa-eye"></i> View
                        </a>
                      </div>
                      <div
                        class="d-flex justify-content-between align-content-center"
                      >
                        <small class="text-body-secondary">
                          <% for(let i = 0; i < 5; i++) { %> <% if(i <
                          orchid.averageRating) { %>
                          <i class="fa-solid fa-star checked"></i>
                          <% } else { %>
                          <i class="fa-solid fa-star"></i>
                          <% } %> <% } %>
                        </small>
                        <small class="text-body-secondary"
                          >(<%= orchid.totalComments %>)</small
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <% }); %>
            </div>
          </div>
          <div class="d-flex justify-content-center my-3">
            <nav aria-label="Page navigation">
              <ul class="pagination">
                <li class="page-item <%= page === 1 ? 'disabled' : '' %>">
                  <a class="page-link" href="/orchids?page=<%= page - 1 %>"
                    >Previous</a
                  >
                </li>
                <% for(let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= page === i ? 'active' : '' %>">
                  <a class="page-link" href="/orchids?page=<%= i %>"
                    ><%= i %></a
                  >
                </li>
                <% } %>
                <li
                  class="page-item <%= page === totalPages ? 'disabled' : '' %>"
                >
                  <a class="page-link" href="/orchids?page=<%= page + 1 %>"
                    >Next</a
                  >
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <%-include('../scripts/globalScript')-%>
      <%-include('../scripts/searchScript')-%>
      <%-include('../partials/footer')-%>
    </main>
  </body>
</html>
